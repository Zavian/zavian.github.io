<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="style/mini-dark.min.css" />
		<link rel="stylesheet" href="style/main.css" />
		<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="col-sm-2 flex">
					<button>Click Me</button>
					<button>Click Me</button>
					<button>Click Me</button>
					<button>Click Me</button>
					<button onclick="btnCapture()">Capture</button>
				</div>
				<div class="col-sm-6">
					<h1>Editor</h1>
					<p>Here goes the editor.</p>
				</div>
				<div class="col-sm-4">
					<div id="capture">
						<h1 style="color: black;">Preview</h1>
						<p>Here goes the preview.</p>
					</div>
				</div>
			</div>
		</div>
		<script src="html2canvas.js"></script>
		<script src="jquery-3.4.0.min.js"></script>
		<script>
			function btnCapture() {
				html2canvas(document.querySelector("#capture")).then(canvas => {
					document.body.appendChild(canvas);
					try {
						var img = canvas.toDataURL("image/jpeg", 0.9).split(",")[1];
					} catch (e) {
						var img = canvas.toDataURL().split(",")[1];
					}

					$.ajax({
						url: "https://api.imgur.com/3/image",
						type: "post",
						headers: {
							Authorization: "Client-ID f71d1c5e1627800"
						},
						data: {
							image: img
						},
						dataType: "json",
						success: function(response) {
							if (response.success) {
								//window.location = response.data.link;
								console.log(response);
							}
						}
					});
				});
			}
		</script>
	</body>
</html>
